<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<f:view>
    <h:panelGrid id="panelIDZayavki" columns="2">

        <p:outputLabel value="Контрагент"/>
        <h:panelGrid columns="2" id="panelViboraIzdanii1">
            <p:selectOneMenu id="agents1"
                             value="#{createEntity.idZayavki.idKontragenta}"
                             filter="true" filterMatchMode="contains"
                             required="true"
                             style="width: 235px"
                             label="Выберите">
                <f:selectItem itemLabel="---" itemValue="-1"/>
                <f:selectItems value="#{createEntity.zakazchikiList}"
                               var="mIDZ"
                               itemLabel="#{mIDZ.clientName}"
                               itemValue="#{mIDZ.idagenta}"/>
                <p:ajax listener="#{createEntity.viborContrAgenta}" update="izdaniya1, panelViboraIzdanii1"/>
            </p:selectOneMenu>
            <p:outputLabel rendered="#{!createEntity.filterKontragentov}"/>
            <p:graphicImage value="../resources/icon/filter.png" rendered="#{createEntity.filterKontragentov}"/>
        </h:panelGrid>

        <p:outputLabel value="Основное издание" for="panelViboraIzdanii2"/>
        <h:panelGrid columns="2" id="panelViboraIzdanii2">
            <p:selectOneMenu id="izdaniya1"
                             value="#{createEntity.idZayavki.idIzdanie}"
                             filter="true" filterMatchMode="contains"
                             required="true">
                <f:selectItems value="#{createEntity.spisokIzdanii}"
                               var="mIzd"
                               itemLabel="#{mIzd.nameIzd}"
                               itemValue="#{mIzd.idreestrIzdanii}"/>
                <p:ajax listener="#{createEntity.viborIzdanii}"
                        update="agents1, panelViboraIzdanii2, leftTreeComponenti, dialogComponentiTree"/>
            </p:selectOneMenu>

            <p:outputLabel rendered="#{!createEntity.filterIzdanii}"/>
            <p:graphicImage value="../resources/icon/filter.png" rendered="#{createEntity.filterIzdanii}"/>
        </h:panelGrid>
        <p:outputLabel value="Комментарий"/>
        <p:inputText value="#{createEntity.idZayavki.commentIzdanie}">
            <p:ajax event="blur" update="leftTreeComponenti, dialogComponentiTree"
                    listener="#{createEntity.chCommentIdZayavki}"/>
        </p:inputText>


        <p:outputLabel value="Тип изделия" for="tipIzdeliya"/>
        <p:outputLabel value="#{createEntity.idZayavki.tipIzdeliya}" rendered="#{createEntity.showLeftMenu}"/>
        <p:selectOneMenu id="tipIzdeliya"
                         value="#{createEntity.idZayavki.tipIzdeliya}" rendered="#{!createEntity.showLeftMenu}">
            <f:selectItem itemLabel="---" itemValue=""/>
            <f:selectItem itemLabel="Журнальное издание КБС" itemValue="Журнальное издание КБС"/>
            <f:selectItem itemLabel="Журнальное издание ВШРА" itemValue="Журнальное издание ВШРА"/>
            <f:selectItem itemLabel="Издания с проклейкой корешка"
                          itemValue="Издания с проклейкой корешка"/>
            <f:selectItem itemLabel="Газетное издание со скреплением"
                          itemValue="Газетное издание со скреплением"/>
            <f:selectItem itemLabel="Газетное издание без скрепления"
                          itemValue="Газетное издание без скрепления"/>
            <f:selectItem itemLabel="Листовое издание без фальцовки"
                          itemValue="Листовое издание без фальцовки"/>
            <f:selectItem itemLabel="Листовое издание с фальцовкой"
                          itemValue="Листовое издание с фальцовкой"/>
            <f:selectItem itemLabel="Ролевый полуфабрикат" itemValue="Ролевый полуфабрикат"/>
            <f:selectItem itemLabel="Книжное издание" itemValue="Книжное издание"/>
            <f:selectItem itemLabel="Календарь" itemValue="Календарь"/>
            <p:ajax listener="#{createEntity.chTipizdeliya}" update="leftTreeComponenti, dialogComponentiTree"/>
        </p:selectOneMenu>

        <p:outputLabel value="Количество компонент:"/><p:outputLabel/>
        <p:outputLabel value="Основные компоненты"/>
        <p:spinner id="colComponent"
                   value="#{createEntity.idZayavki.colComponent}"
                   min="1"
                   suffix=" шт">
            <p:ajax update="leftTreeComponenti, dialogComponentiTree" listener="#{createEntity.chColComponent}"/>
        </p:spinner>
        <p:outputLabel value="Дополнительные изделия"/>
        <p:spinner value="#{createEntity.idZayavki.colDopIzdelii}" min="0" suffix=" шт">
            <p:ajax update="leftTreeComponenti, dialogComponentiTree" listener="#{createEntity.chColDopIzdelii}"/>
        </p:spinner>
        <p:outputLabel value="Количество частей издания">

        </p:outputLabel>
        <p:spinner id="colPodizdanii"
                   value="#{createEntity.idZayavki.colPodizdanii}"
                   min="1"
                   suffix=" шт">
            <p:ajax update="leftTreeComponenti, dialogComponentiTree" listener="#{createEntity.chColPodizdanii}"/>
        </p:spinner>

        <p:outputLabel value="Дата прихода"/>

        <p:calendar id="dataBegin"
                    value="#{createEntity.bufData1}"
                    pattern="dd/MM/yyyy HH:mm">
            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
            <p:ajax event="dateSelect" listener="#{createEntity.saveDate}"/>
        </p:calendar>

        <p:outputLabel value="Дата отгрузки"/>
        <p:calendar id="dataEnd"
                    value="#{createEntity.bufData2}"
                    pattern="dd/MM/yyyy HH:mm">
            <f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
            <p:ajax event="dateSelect" listener="#{createEntity.saveDate}"/>
        </p:calendar>

        <p:outputLabel value="Формат 1"/>
        <p:spinner id="format1" value="#{createEntity.idZayavki.format1}" min="1" max="2500" suffix=" мм">
            <p:ajax listener="#{createEntity.saveMethod}"/>
        </p:spinner>
        <p:outputLabel value="Формат 2"/>
        <p:spinner id="format2" value="#{createEntity.idZayavki.format2}" min="1" max="2500" suffix=" мм">
            <p:ajax listener="#{createEntity.saveMethod}"/>
        </p:spinner>
        <p:outputLabel value="Тираж"/>
        <p:spinner id="tiraj" value="#{createEntity.idZayavki.tiraj}" min="1000" max="5000000" suffix=" экз">
            <p:ajax listener="#{createEntity.saveMethod}"/>
        </p:spinner>

        <p:commandButton value="Построить"
                         rendered="#{!createEntity.showLeftMenu}"
                         actionListener="#{createEntity.createTree}"
                         update="mainElements"/>
    </h:panelGrid>
</f:view>
</html>
